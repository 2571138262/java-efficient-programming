## 工具集

### 1、Google Guava 工具集简介

##### Guava工程包含了若干被Google的Java项目广泛依赖的核心库， 例如:集合、缓存、原生类型支持、并发库、通用注解、字符串处理、I/O等等。
##### 所有这些工具每天都在被Google的工程师应用在产品服务中。

#### (1)、使用和避免null
* “Null 真糟糕” --- Doug Lea (JUC并发包的创始人)
* 大多数情况下，使用null表明的是某种缺失情况

##### Guava引入Optional<T> 表明可能为null的T类型引用。Optional实例可能包含非null的引用(引用存在)，也可能什么也不包括(引用缺失)。
##### 正是受到Guava的启发，Java8将Optional类做为一个锌特性引入进Java8的类库。


### 2、实战案例 : Java8新特性Optional
* 实战 : Java8 的Optional锌特性如何使用


### 2、不可变集合

##### 创建对象的不可变拷贝是一项很好的防御性编程技巧
##### Guava为所有JDK标准集合类型和Guava新集合类型都提供了简单易用的不可变版本

#### (1)、不可变对象的优点
* 当对象被不可信的库调用时，不可变形式是安全的
* 不可变对象被多个线程调用是，不存在竞态条件问题
* 不可变集合不需要考虑变化，因此可以节省时间和空间
* 不可变对象因为有固定不变，可以作为常量来安全使用

#### (2)、JDK提供的unmodifiableXXX方法
* 笨重而且累赘
* 不安全
* 低效

#### (3)、不可变集合的三种创建方式
* copyOf方法 : ImmutableSet.copyOf(set)
* of方法 : ImmutableSet.of("a", "b", "c");
* Builder工具 : ImmutableSet.builder().build()


### 3、新集合类型

##### Guava引入了很多JDK没有的，但明显有用的新集合类型。这些新类型是为了和JDK集合框架共存，而没有往JDK集合抽象中硬塞其他概念。

#### (1)、Multiset (用两种不同的视角去审视它)

###### Multiset 中元素可以是重复的，但是元素也是无序的

1. 没有元素顺序限制的ArrayList(E)
> add(E) : 添加单个给定元素

> iterator() : 返回一个迭代器，包含Multiset所有元素(包含重复元素)

> size() : 返回所有元素的总个数(包含重复元素)

2. Map<E, Integer>, 键为元素，值为计数
> count(Object) : 返回给定元素的计数

> entrySet()  : 返回Set<Multiset.Entry<E>>, 和Map的entrySet类似

> elementSet() : 返回所有不重复元素的Set<E>, 和Map的keySet类似

#### (2)、Multiset和Map的区别

1. 元素计数只能是正数
2. multiset.size()返回集合大小
3. multiset.iterator()会迭代重复的元素
4. multiset支持直接设置元素的计数
5. 没有的元素，multiset.count(E)为0

#### (4)、多种Multiset的实现
1. HashMultiset
2. TreeMultiset
3. LinkedHashMultiset
4. ConcurrentHashMulitset
5. ImmutableMultiset

#### (5)、实战案例 : Multiset使用
1. 实战 : 使用Multiset集合类，实现统计一篇文章中文字出现次数功能